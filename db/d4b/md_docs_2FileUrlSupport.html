<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EonPlay: EonPlay File &amp; URL Support</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EonPlay<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Timeless, futuristic media player - play for eons</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">EonPlay File &amp; URL Support</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md15"></a> This document describes the file and URL support functionality implemented in <a class="el" href="../../d8/d45/namespaceEonPlay.html">EonPlay</a> as part of task 2.5.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Overview</h1>
<p>The <a class="el" href="../../d8/d04/classFileUrlSupport.html" title="EonPlay file and URL support component.">FileUrlSupport</a> component provides comprehensive support for loading media files and URLs, handling drag-and-drop operations, validating file formats, auto-detecting subtitles, extracting media information, and capturing screenshots.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Features Implemented</h1>
<h2><a class="anchor" id="autotoc_md18"></a>
1. Drag-and-Drop File Support</h2>
<ul>
<li><b><a class="el" href="../../dd/d2d/classDragDropWidget.html" title="Widget that handles drag and drop operations for media files and URLs.">DragDropWidget</a></b>: A reusable widget that handles drag-and-drop operations</li>
<li>Supports dropping multiple files and URLs</li>
<li>Visual feedback during drag operations</li>
<li>Automatic file validation and processing</li>
<li>Error handling for unsupported formats</li>
</ul>
<p><b>Usage:</b> </p><div class="fragment"><div class="line"><span class="keyword">auto</span> dragDropWidget = <span class="keyword">new</span> <a class="code hl_class" href="../../dd/d2d/classDragDropWidget.html">DragDropWidget</a>();</div>
<div class="line">dragDropWidget-&gt;setFileUrlSupport(fileUrlSupport);</div>
<div class="line">connect(dragDropWidget, &amp;<a class="code hl_signal" href="../../dd/d2d/classDragDropWidget.html#a5c0efac8ffbf34cf23af34dac8f5c910">DragDropWidget::filesDropped</a>, </div>
<div class="line">        <span class="keyword">this</span>, &amp;MyClass::onFilesDropped);</div>
<div class="ttc" id="aclassDragDropWidget_html"><div class="ttname"><a href="../../dd/d2d/classDragDropWidget.html">DragDropWidget</a></div><div class="ttdoc">Widget that handles drag and drop operations for media files and URLs.</div><div class="ttdef"><b>Definition</b> DragDropWidget.h:20</div></div>
<div class="ttc" id="aclassDragDropWidget_html_a5c0efac8ffbf34cf23af34dac8f5c910"><div class="ttname"><a href="../../dd/d2d/classDragDropWidget.html#a5c0efac8ffbf34cf23af34dac8f5c910">DragDropWidget::filesDropped</a></div><div class="ttdeci">void filesDropped(const QStringList &amp;processedFiles, const QStringList &amp;failedFiles)</div><div class="ttdoc">Emitted when files are dropped and processed.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md19"></a>
2. URL/Stream Playback Capability</h2>
<ul>
<li>Support for multiple URL schemes: HTTP, HTTPS, RTSP, RTMP, FTP, etc.</li>
<li>Stream validation and error reporting</li>
<li>Local file URL handling (<a href="file://">file://</a>)</li>
<li>Network stream compatibility</li>
</ul>
<p><b>Supported URL Schemes:</b></p><ul>
<li><code><a href="http://">http://</a></code> and <code><a href="https://">https://</a></code> - Web streams</li>
<li><code>rtsp://</code> - Real-Time Streaming Protocol</li>
<li><code>rtmp://</code> - Real-Time Messaging Protocol</li>
<li><code><a href="ftp://">ftp://</a></code> - File Transfer Protocol</li>
<li><code><a href="file://">file://</a></code> - Local file URLs</li>
<li><code>mms://</code> - Microsoft Media Server</li>
<li>And more...</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
3. File Format Validation and Error Reporting</h2>
<ul>
<li>Comprehensive file extension validation</li>
<li>File header validation for security</li>
<li>File size limit checking</li>
<li>Access permission verification</li>
<li>Detailed error messages for validation failures</li>
</ul>
<p><b>Validation Results:</b></p><ul>
<li><code>Valid</code> - File is supported and accessible</li>
<li><code>UnsupportedFormat</code> - File format not supported</li>
<li><code>FileNotFound</code> - File does not exist</li>
<li><code>FileTooLarge</code> - File exceeds size limits</li>
<li><code>AccessDenied</code> - Cannot access file</li>
<li><code>CorruptedFile</code> - File appears corrupted</li>
<li><code>SecurityRisk</code> - File poses security risk</li>
</ul>
<h2><a class="anchor" id="autotoc_md21"></a>
4. Auto Subtitle Loading Detection</h2>
<ul>
<li>Automatic detection of subtitle files in the same directory</li>
<li>Support for common subtitle formats: SRT, ASS, SSA, VTT, etc.</li>
<li>Intelligent matching based on filename patterns</li>
<li>Search in common subtitle subdirectories</li>
</ul>
<p><b>Subtitle Matching Patterns:</b></p><ul>
<li>Exact match: <code>movie.mp4</code> → <code>movie.srt</code></li>
<li>Language suffix: <code>movie.mp4</code> → <code>movie.en.srt</code></li>
<li>Common patterns: <code>movie.mp4</code> → <code>movie_english.srt</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md22"></a>
5. Playback Info Display (Bitrate, Codec, FPS)</h2>
<ul>
<li><b><a class="el" href="../../dd/d6b/classMediaInfoWidget.html" title="Widget for displaying detailed media information.">MediaInfoWidget</a></b>: Comprehensive media information display</li>
<li>Real-time extraction of media metadata using libVLC</li>
<li>Detailed technical information including:<ul>
<li>Video: Resolution, frame rate, codec, bitrate</li>
<li>Audio: Codec, channels, sample rate, bitrate</li>
<li>General: Duration, file size, format</li>
</ul>
</li>
</ul>
<p><b><a class="el" href="../../db/d09/structMediaInfo.html" title="Media information structure containing detailed playback info.">MediaInfo</a> Structure:</b> </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="../../db/d09/structMediaInfo.html">MediaInfo</a> {</div>
<div class="line">    QString <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a3895ed52b62420d71fe90046bf04171b">filePath</a>;</div>
<div class="line">    QString <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a843511475196e275f5e79dea5cd81409">title</a>;</div>
<div class="line">    QString <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a685581947fe9efba36fdcacf28d445a6">format</a>;</div>
<div class="line">    QString <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#ac554b0c32ee53fc019e388e73ec27250">videoCodec</a>;</div>
<div class="line">    QString <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a4bbf96a1fc0e354d34b4921e83a6d0ec">audioCodec</a>;</div>
<div class="line">    qint64 <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a94eecf681800399d622550a064e03297">duration</a>;</div>
<div class="line">    qint64 <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#ab894956f4bf47f3500cf44d463bf3f64">fileSize</a>;</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#aa2643f36c14c86afc784258a54723d88">videoBitrate</a>;</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#afbfa24f00c1300f3bb88733783c16fa4">audioBitrate</a>;</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a9e09a0cbb67b81bb31328bb2a16ae348">width</a>, <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a7ca584569b8d6e8fc248dde2b7ed9e8f">height</a>;</div>
<div class="line">    <span class="keywordtype">double</span> <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a20713dc804b6fd88dfd428379b499fbd">frameRate</a>;</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#adee41e003ea4248e93cbb86b3b765f38">audioChannels</a>;</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a0e3b055a952616444578bed49155fb87">audioSampleRate</a>;</div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a12a180dc0286724c621e450cb54cfd86">hasVideo</a>;</div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a71182f7ed7ce43964f8d049ffda064ee">hasAudio</a>;</div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../db/d09/structMediaInfo.html#a9a542181c575e4a1f6c81eec7110f1b4">isValid</a>;</div>
<div class="line">};</div>
<div class="ttc" id="astructMediaInfo_html"><div class="ttname"><a href="../../db/d09/structMediaInfo.html">MediaInfo</a></div><div class="ttdoc">Media information structure containing detailed playback info.</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:21</div></div>
<div class="ttc" id="astructMediaInfo_html_a0e3b055a952616444578bed49155fb87"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a0e3b055a952616444578bed49155fb87">MediaInfo::audioSampleRate</a></div><div class="ttdeci">int audioSampleRate</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:35</div></div>
<div class="ttc" id="astructMediaInfo_html_a12a180dc0286724c621e450cb54cfd86"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a12a180dc0286724c621e450cb54cfd86">MediaInfo::hasVideo</a></div><div class="ttdeci">bool hasVideo</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:36</div></div>
<div class="ttc" id="astructMediaInfo_html_a20713dc804b6fd88dfd428379b499fbd"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a20713dc804b6fd88dfd428379b499fbd">MediaInfo::frameRate</a></div><div class="ttdeci">double frameRate</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:33</div></div>
<div class="ttc" id="astructMediaInfo_html_a3895ed52b62420d71fe90046bf04171b"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a3895ed52b62420d71fe90046bf04171b">MediaInfo::filePath</a></div><div class="ttdeci">QString filePath</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:22</div></div>
<div class="ttc" id="astructMediaInfo_html_a4bbf96a1fc0e354d34b4921e83a6d0ec"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a4bbf96a1fc0e354d34b4921e83a6d0ec">MediaInfo::audioCodec</a></div><div class="ttdeci">QString audioCodec</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:26</div></div>
<div class="ttc" id="astructMediaInfo_html_a685581947fe9efba36fdcacf28d445a6"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a685581947fe9efba36fdcacf28d445a6">MediaInfo::format</a></div><div class="ttdeci">QString format</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:24</div></div>
<div class="ttc" id="astructMediaInfo_html_a71182f7ed7ce43964f8d049ffda064ee"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a71182f7ed7ce43964f8d049ffda064ee">MediaInfo::hasAudio</a></div><div class="ttdeci">bool hasAudio</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:37</div></div>
<div class="ttc" id="astructMediaInfo_html_a7ca584569b8d6e8fc248dde2b7ed9e8f"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a7ca584569b8d6e8fc248dde2b7ed9e8f">MediaInfo::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:32</div></div>
<div class="ttc" id="astructMediaInfo_html_a843511475196e275f5e79dea5cd81409"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a843511475196e275f5e79dea5cd81409">MediaInfo::title</a></div><div class="ttdeci">QString title</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:23</div></div>
<div class="ttc" id="astructMediaInfo_html_a94eecf681800399d622550a064e03297"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a94eecf681800399d622550a064e03297">MediaInfo::duration</a></div><div class="ttdeci">qint64 duration</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:27</div></div>
<div class="ttc" id="astructMediaInfo_html_a9a542181c575e4a1f6c81eec7110f1b4"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a9a542181c575e4a1f6c81eec7110f1b4">MediaInfo::isValid</a></div><div class="ttdeci">bool isValid</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:38</div></div>
<div class="ttc" id="astructMediaInfo_html_a9e09a0cbb67b81bb31328bb2a16ae348"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#a9e09a0cbb67b81bb31328bb2a16ae348">MediaInfo::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:31</div></div>
<div class="ttc" id="astructMediaInfo_html_aa2643f36c14c86afc784258a54723d88"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#aa2643f36c14c86afc784258a54723d88">MediaInfo::videoBitrate</a></div><div class="ttdeci">int videoBitrate</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:29</div></div>
<div class="ttc" id="astructMediaInfo_html_ab894956f4bf47f3500cf44d463bf3f64"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#ab894956f4bf47f3500cf44d463bf3f64">MediaInfo::fileSize</a></div><div class="ttdeci">qint64 fileSize</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:28</div></div>
<div class="ttc" id="astructMediaInfo_html_ac554b0c32ee53fc019e388e73ec27250"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#ac554b0c32ee53fc019e388e73ec27250">MediaInfo::videoCodec</a></div><div class="ttdeci">QString videoCodec</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:25</div></div>
<div class="ttc" id="astructMediaInfo_html_adee41e003ea4248e93cbb86b3b765f38"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#adee41e003ea4248e93cbb86b3b765f38">MediaInfo::audioChannels</a></div><div class="ttdeci">int audioChannels</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:34</div></div>
<div class="ttc" id="astructMediaInfo_html_afbfa24f00c1300f3bb88733783c16fa4"><div class="ttname"><a href="../../db/d09/structMediaInfo.html#afbfa24f00c1300f3bb88733783c16fa4">MediaInfo::audioBitrate</a></div><div class="ttdeci">int audioBitrate</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:30</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md23"></a>
6. Screenshot Capture Functionality</h2>
<ul>
<li>Capture screenshots of current video frame</li>
<li>Capture screenshots at specific positions</li>
<li>Configurable screenshot format (PNG, JPG, etc.)</li>
<li>Automatic filename generation with timestamps</li>
<li>Custom save directory support</li>
</ul>
<p><b>Screenshot Features:</b></p><ul>
<li>Current frame capture</li>
<li>Position-specific capture</li>
<li>Multiple image formats</li>
<li>Automatic directory creation</li>
<li>Timestamp-based naming</li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
Supported File Formats</h1>
<h2><a class="anchor" id="autotoc_md25"></a>
Video Formats</h2>
<ul>
<li><b>Container formats</b>: MP4, AVI, MKV, MOV, WMV, FLV, WebM, M4V, 3GP, ASF, RM, VOB, OGV, TS, MTS, M2TS</li>
<li><b>Codecs</b>: H.264, H.265, VP8, VP9, MPEG-2, MPEG-4, DivX, Xvid, and more</li>
</ul>
<h2><a class="anchor" id="autotoc_md26"></a>
Audio Formats</h2>
<ul>
<li><b>Lossless</b>: FLAC, WAV, AIFF, APE, WV, TTA</li>
<li><b>Lossy</b>: MP3, AAC, OGG, WMA, M4A, Opus</li>
<li><b>Professional</b>: AC3, DTS, AMR, AU, RA</li>
</ul>
<h2><a class="anchor" id="autotoc_md27"></a>
Playlist Formats</h2>
<ul>
<li>M3U, M3U8, PLS, XSPF, ASX, WPL, SMIL</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
Subtitle Formats</h2>
<ul>
<li>SRT, ASS, SSA, SUB, IDX, VTT, TTML, DFXP, SMI, RT, TXT</li>
</ul>
<h1><a class="anchor" id="autotoc_md29"></a>
API Reference</h1>
<h2><a class="anchor" id="autotoc_md30"></a>
FileUrlSupport Class</h2>
<h3><a class="anchor" id="autotoc_md31"></a>
Core Methods</h3>
<div class="fragment"><div class="line"><span class="comment">// File operations</span></div>
<div class="line"><span class="keywordtype">bool</span> loadMediaFile(<span class="keyword">const</span> QString&amp; filePath);</div>
<div class="line"><span class="keywordtype">bool</span> loadMediaUrl(<span class="keyword">const</span> QUrl&amp; url);</div>
<div class="line"><a class="code hl_enumeration" href="../../d7/d62/FileUrlSupport_8h.html#a35e452a11d6f808cdfa73b5af45e3ed0">ValidationResult</a> validateMediaFile(<span class="keyword">const</span> QString&amp; filePath) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Drag and drop</span></div>
<div class="line"><span class="keywordtype">bool</span> canHandleMimeData(<span class="keyword">const</span> QMimeData* mimeData) <span class="keyword">const</span>;</div>
<div class="line">QStringList processDroppedMedia(<span class="keyword">const</span> QMimeData* mimeData);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Media information</span></div>
<div class="line"><a class="code hl_struct" href="../../db/d09/structMediaInfo.html">MediaInfo</a> extractMediaInfo(<span class="keyword">const</span> QString&amp; filePath);</div>
<div class="line"><a class="code hl_struct" href="../../db/d09/structMediaInfo.html">MediaInfo</a> getCurrentMediaInfo() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Subtitle detection</span></div>
<div class="line">QStringList autoDetectSubtitles(<span class="keyword">const</span> QString&amp; mediaPath);</div>
<div class="line"><span class="keywordtype">bool</span> isSubtitleMatch(<span class="keyword">const</span> QString&amp; mediaPath, <span class="keyword">const</span> QString&amp; subtitlePath) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Screenshot capture</span></div>
<div class="line">QString captureScreenshot(<span class="keyword">const</span> QString&amp; filePath = QString());</div>
<div class="line">QString captureScreenshotAtPosition(qint64 position, <span class="keyword">const</span> QString&amp; filePath = QString());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Configuration</span></div>
<div class="line">QStringList getSupportedExtensions() <span class="keyword">const</span>;</div>
<div class="line">QStringList getSupportedUrlSchemes() <span class="keyword">const</span>;</div>
<div class="line">QString getFileFilter() <span class="keyword">const</span>;</div>
<div class="ttc" id="aFileUrlSupport_8h_html_a35e452a11d6f808cdfa73b5af45e3ed0"><div class="ttname"><a href="../../d7/d62/FileUrlSupport_8h.html#a35e452a11d6f808cdfa73b5af45e3ed0">ValidationResult</a></div><div class="ttdeci">ValidationResult</div><div class="ttdoc">File format validation result.</div><div class="ttdef"><b>Definition</b> FileUrlSupport.h:62</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md32"></a>
Signals</h3>
<div class="fragment"><div class="line"><span class="comment">// Media loading</span></div>
<div class="line"><span class="keywordtype">void</span> mediaFileLoaded(<span class="keyword">const</span> QString&amp; filePath, <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d09/structMediaInfo.html">MediaInfo</a>&amp; mediaInfo);</div>
<div class="line"><span class="keywordtype">void</span> mediaUrlLoaded(<span class="keyword">const</span> QUrl&amp; url, <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d09/structMediaInfo.html">MediaInfo</a>&amp; mediaInfo);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Validation errors</span></div>
<div class="line"><span class="keywordtype">void</span> fileValidationFailed(<span class="keyword">const</span> QString&amp; filePath, <a class="code hl_enumeration" href="../../d7/d62/FileUrlSupport_8h.html#a35e452a11d6f808cdfa73b5af45e3ed0">ValidationResult</a> result, <span class="keyword">const</span> QString&amp; errorMessage);</div>
<div class="line"><span class="keywordtype">void</span> urlValidationFailed(<span class="keyword">const</span> QUrl&amp; url, <span class="keyword">const</span> QString&amp; errorMessage);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Subtitle detection</span></div>
<div class="line"><span class="keywordtype">void</span> subtitlesDetected(<span class="keyword">const</span> QString&amp; mediaPath, <span class="keyword">const</span> QStringList&amp; subtitlePaths);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Media information</span></div>
<div class="line"><span class="keywordtype">void</span> mediaInfoExtracted(<span class="keyword">const</span> QString&amp; filePath, <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d09/structMediaInfo.html">MediaInfo</a>&amp; mediaInfo);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Screenshot capture</span></div>
<div class="line"><span class="keywordtype">void</span> screenshotCaptured(<span class="keyword">const</span> QString&amp; screenshotPath, qint64 position);</div>
<div class="line"><span class="keywordtype">void</span> screenshotCaptureFailed(<span class="keyword">const</span> QString&amp; errorMessage);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Drag and drop</span></div>
<div class="line"><span class="keywordtype">void</span> dragDropProcessed(<span class="keyword">const</span> QStringList&amp; processedFiles, <span class="keyword">const</span> QStringList&amp; failedFiles);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md33"></a>
Example Usage</h1>
<h2><a class="anchor" id="autotoc_md34"></a>
Basic File Loading</h2>
<div class="fragment"><div class="line"><span class="keyword">auto</span> fileUrlSupport = std::make_shared&lt;FileUrlSupport&gt;();</div>
<div class="line">fileUrlSupport-&gt;setMediaEngine(mediaEngine);</div>
<div class="line">fileUrlSupport-&gt;initialize();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load a media file</span></div>
<div class="line"><span class="keywordflow">if</span> (fileUrlSupport-&gt;loadMediaFile(<span class="stringliteral">&quot;/path/to/video.mp4&quot;</span>)) {</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;File loaded successfully&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load a URL</span></div>
<div class="line">QUrl streamUrl(<span class="stringliteral">&quot;http://example.com/stream.m3u8&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (fileUrlSupport-&gt;loadMediaUrl(streamUrl)) {</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;Stream loaded successfully&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md35"></a>
Drag and Drop Integration</h2>
<div class="fragment"><div class="line"><span class="keyword">auto</span> dragDropWidget = <span class="keyword">new</span> <a class="code hl_class" href="../../dd/d2d/classDragDropWidget.html">DragDropWidget</a>(parentWidget);</div>
<div class="line">dragDropWidget-&gt;setFileUrlSupport(fileUrlSupport);</div>
<div class="line"> </div>
<div class="line">connect(dragDropWidget, &amp;<a class="code hl_signal" href="../../dd/d2d/classDragDropWidget.html#a5c0efac8ffbf34cf23af34dac8f5c910">DragDropWidget::filesDropped</a>,</div>
<div class="line">        [](<span class="keyword">const</span> QStringList&amp; processed, <span class="keyword">const</span> QStringList&amp; failed) {</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;Processed:&quot;</span> &lt;&lt; processed.size() &lt;&lt; <span class="stringliteral">&quot;Failed:&quot;</span> &lt;&lt; failed.size();</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md36"></a>
Media Information Display</h2>
<div class="fragment"><div class="line"><span class="keyword">auto</span> mediaInfoWidget = <span class="keyword">new</span> <a class="code hl_class" href="../../dd/d6b/classMediaInfoWidget.html">MediaInfoWidget</a>();</div>
<div class="line">mediaInfoWidget-&gt;setFileUrlSupport(fileUrlSupport);</div>
<div class="line">mediaInfoWidget-&gt;setShowTechnicalDetails(<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The widget will automatically update when media is loaded</span></div>
<div class="ttc" id="aclassMediaInfoWidget_html"><div class="ttname"><a href="../../dd/d6b/classMediaInfoWidget.html">MediaInfoWidget</a></div><div class="ttdoc">Widget for displaying detailed media information.</div><div class="ttdef"><b>Definition</b> MediaInfoWidget.h:24</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md37"></a>
Screenshot Capture</h2>
<div class="fragment"><div class="line"><span class="comment">// Capture current frame</span></div>
<div class="line">QString screenshotPath = fileUrlSupport-&gt;captureScreenshot();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Capture at specific position</span></div>
<div class="line">QString screenshotPath = fileUrlSupport-&gt;captureScreenshotAtPosition(60000); <span class="comment">// 1 minute</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Configure screenshot settings</span></div>
<div class="line">fileUrlSupport-&gt;setScreenshotDirectory(<span class="stringliteral">&quot;/path/to/screenshots&quot;</span>);</div>
<div class="line">fileUrlSupport-&gt;setScreenshotFormat(<span class="stringliteral">&quot;PNG&quot;</span>);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md38"></a>
Security Considerations</h1>
<ul>
<li>File header validation prevents malicious file exploitation</li>
<li>File size limits prevent resource exhaustion</li>
<li>Path validation prevents directory traversal attacks</li>
<li>URL scheme validation prevents unauthorized protocol access</li>
<li>Sandboxed media decoding through libVLC</li>
</ul>
<h1><a class="anchor" id="autotoc_md39"></a>
Performance Considerations</h1>
<ul>
<li>Media information extraction is performed asynchronously</li>
<li>Thumbnail/screenshot generation is cached</li>
<li>File validation is optimized for common cases</li>
<li>Large file handling with appropriate size limits</li>
<li>Memory-efficient subtitle detection</li>
</ul>
<h1><a class="anchor" id="autotoc_md40"></a>
Testing</h1>
<p>The implementation includes comprehensive unit tests covering:</p><ul>
<li>File format validation</li>
<li>URL validation</li>
<li>Subtitle detection and matching</li>
<li>Media information extraction</li>
<li>Screenshot functionality</li>
<li>Drag and drop operations</li>
</ul>
<p>Run tests with: </p><div class="fragment"><div class="line">cd build</div>
<div class="line">ctest -R test_file_url_support</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md41"></a>
Integration with EonPlay</h1>
<p>This component integrates seamlessly with other <a class="el" href="../../d8/d45/namespaceEonPlay.html">EonPlay</a> components:</p><ul>
<li><b><a class="el" href="../../d6/d6e/classVLCBackend.html" title="libVLC-based media engine implementation">VLCBackend</a></b>: Uses libVLC for media loading and information extraction</li>
<li><b><a class="el" href="../../d0/d22/classPlaybackController.html" title="EonPlay core playback controller that manages media playback operations.">PlaybackController</a></b>: Provides media loading interface</li>
<li><b>UI Components</b>: <a class="el" href="../../dd/d2d/classDragDropWidget.html" title="Widget that handles drag and drop operations for media files and URLs.">DragDropWidget</a> and <a class="el" href="../../dd/d6b/classMediaInfoWidget.html" title="Widget for displaying detailed media information.">MediaInfoWidget</a> for user interaction</li>
<li><b>Settings System</b>: Configurable screenshot and validation settings</li>
</ul>
<h1><a class="anchor" id="autotoc_md42"></a>
Future Enhancements</h1>
<p>Potential future improvements:</p><ul>
<li>Cloud storage integration (Google Drive, Dropbox)</li>
<li>Advanced metadata extraction (album art, lyrics)</li>
<li>Batch file processing</li>
<li>Custom subtitle format support</li>
<li>Video thumbnail generation</li>
<li>Network stream recording</li>
<li>Playlist import/export </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
